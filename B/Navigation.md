# Инструкции для участника

## Прочитайте задание полностью.

Обратите внимание на то, что задание написано не в хронологическом порядке; последовательность действий для выполнения задания остаётся на ваше усмотрение.
Выполнение задания на 100% за отведённое время теоретически возможно, но от вас не требуется выполнять задание полностью.
Распределите время работы таким образом, чтобы заработать максимальное количество баллов. Во время выполнения задания руководствуйтесь следующими полезными советами:
1. Если вам необходимо установить пароль, но в задании не указано, какой именно — установите P@ssw0rd.
2. Если вы по каким-либо причинам хотите использовать свои собственные учетные данные/адреса/DNS имена — не забудьте указать их в черновике и оставить его на вашем рабочем месте.
3. Внимательно проверяйте свою работу. Если эксперты не смогут подключиться к чему-либо по какой-либо причине (сетевая недоступность, не подходят учетные данные) — проверка этого устройства производится не будет.
4. Любые дополнительные комментарии и пожелания на проверку вы можете оставить для экспертов в черновике. Ваши комментарии гарантированно будут прочитаны перед проверкой или во время проверки.
5. Если вы столкнулись с непониманием пункта задания — поднимите руку и спросите.
6. Вы можете расходовать ваше время так, как вам этого хочется. Помните, что время, затраченное на ваши нужды, не компенсируется, за исключением обеда и случаев проблем со стороны площадки.

# Легенда конкурсного задания

По легенде конкурсного задания ваша организация - Холдинг “CoolCompany”, занимается аудитом систем информационной безопасности, а также проводит разработку собственного коммерческого продукта - “Afisha Today”. Это платформа для малых предприятий и частных лиц в индустрии развлечений и досуга. Платформа за фиксированную комиссию предлагает разместить объявление на открытом ресурсе. Платформа берёт на себя обязательства помочь с регистрацией слушателей и полное информационное сопровождение мероприятий.

Компания имеет серверную стойку в ЦОД, офис в Москве, аренду виртуальной машины в публичном облаке “Cloud Happy” а также недавно Холдинг вышел на новый рынок, завершив покупку ГК “Минералы Урала” - вся ИТ-инфраструктура горнодобывающей компании, как и все её процессы, теперь перешли в ответственность “CoolCompany”. Ранее в организации “Минералы Урала” работала другая ИТ-компания и совершенно не оставила документации после себя. Необходимо будет исправить текущие процессы и проверить работу.

## Используемые операционные системы:

| Наименование виртуальной машины  | Версия операционной системы  |  Режим работы |
|---|---|---|
| DC-MAILSERVER  | Debian 12  | Неграфический сервер  |
| DC-STORAGE  | Debian 12  | Неграфический сервер  |
| DC-RTR-2  | Debian 12  | Неграфический сервер  |
| DC-RTR-1  | Debian 12  | Неграфический сервер  |
| REMOTE-TERMINAL  | Astra Linux 1.7  | Графический клиент, режим работы “Воронеж”  |
| MOOGLE  | Участнику недоступен  | Участнику недоступен  |
| AZAZON  | Участнику недоступен  | Участнику недоступен  |
| REPO-MIRROR  | Участнику недоступен  | Участнику недоступен  |
| CLOUD-VM  | Debian 12  | Неграфический сервер  |
| MSK-RTR  | Debian 12  | Неграфический сервер  |
| MSK-DC  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |
| MSK-ADMINPC  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |
| MSK-WORKER  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |
| MSK-GITLAB  | Debian 12  | Неграфический сервер  |
| YEKT-RTR  | Debian 12  | Неграфический сервер  |
| YEKT-BILLING  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |
| YEKT-DB  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |
| YEKT-WORKER  | Astra Linux 1.7  | Графический сервер, режим работы “Воронеж”  |


Машина REPO-MIRROR представляет собой прокси-сервер, выполняющий трансляцию запросов на официальные репозитории Debian 12 (mirror.yandex.ru), Ubuntu 24.04 (mirror.yandex.ru), Astra Linux 1.7 (dl.astralinux.ru).

Также, на машине REPO-MIRROR сохранены в папке /configs полезные документы и готовые файлы конфигураций, которыми будет удобно пользоваться при выполнении задания.

В инфраструктуре задания выход в “настоящий” интернет непредусмотрен, система лишь эмулирует работы реального Интернета, но напрямую выход недоступен.

На провайдере ISP (77.88.8.1) настроен DNS с следующими записями:


| DNS-запись  | Адрес  | Назначение  |
|---|---|---|
| repo.atomskills.ru  | 77.88.8.8  | Доступ к репозиторию по доменному имени  |
| vpn.atomskills.ru  | 179.13.219.70  | VPN-адрес, для подключения с компьютера REMOTE-TERMINAL  |


# Работы в ЦОД

## 1. На всех устройствах, указанных на топологии, создайте и настройте L3-адреса.

## 2. Все устройства (за исключением DC-STORAGE) должны прослушивать 22 порт SSH исключительно на внутреннем интерфейсе, по протоколу IPv4. Логин доступа - cod_admin:

2.1 Доступ исключительно по ключу. Ключ сохраните на сервере DC-STORAGE в каталоге - /ssh_keys, у пользователя cod_admin в домашнем каталоге никаких ключей быть не должно;
2.2 Для DC-STORAGE доступ по SSH с пользователем cod_admin по паролю для подключенных пользователей через OpenConnect - пароль для подключения по SSH- At0mSk1lls;
2.3 На всех целевых машинах в датацентре пользователь cod_admin должен иметь доступ к команде sudo без запроса пароля.

## 3. Между DC-RTR-2,DC-RTR-1,MSK-RTR,YEKT-RTR настройте удалённый защищённый туннель:

3.1 В качестве инструмента защиты используйте любое решение;
3.2 Важно организовать следующую логику работы соединений:
3.3 В случае, если соединение пропадает с Московского офиса до ЦОД - канал связи автоматически перестраивается на соединение с Екатеринбургом и перенаправляет трафик через резервного провайдера;
3.4 В случае, если соединение пропадает из офиса в Екатеринбурге - канал связи аналогично переключается на Московский офис и проходит по другому каналу связи;
3.5 При восстановлении соединения, система обратно переключается на основной канал связи;
3.6 Необходимо обеспечить бесперебойную работу сервера почты для всех филиалов, используйте этот сервис в качестве проверки доступности;
3.7 Основное соединение, ровно как и резервные обязательно должны быть зашифрованы;
3.8 Вы можете самостоятельно проверить механизм отключения “провайдера”, под пользователем test с паролем P@ssw0rd в домашнем каталоге расположены скрипты, отвечающие за данную настройку;
3.9 При нормальной работе системы, туннели должны быть настроены в строгом соответствии с Топологией VPN. Дополнительные интерфейсы использовать запрещено.
