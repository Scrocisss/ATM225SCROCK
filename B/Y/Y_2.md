# Zabbix TLS

```bash
1) Настройка -> Узлы сети -> Триггеры -> Имя (cpu80 и disk90) -> Важность (чрезвычайная) -> Выражение (abs >= 80|>=90)
2) Настройка -> Действия -> Действия триггеров -> Создать действие -> Имя (по заданию) -> Условия -> Тип (Триггер) -> Оператор (равно) -> Триггеры (cpu80 и disk90)
3) Операция -> Операции (добавить) -> Отправка пользователям (Admin) -> Отправка только через Line
```




Генерация ключа для zabbix:

mkdir -p /root/zabbix_ssl && cd /root/zabbix_ssl && openssl genrsa -out zabbix.key.pem 2048

Создание запроса:

openssl req -new -key zabbix.key.pem -out zabbix.csr.pem \
-subj "/C=RU/ST=Московская/L=Москва/O=Cool Company/CN=yekt-db.company.cool"

копируем запрос на MSK

Подписываем:

openssl x509 -req -in zabbix.csr.pem -CA /root/ca/ca.cert.pem -CAkey /root/ca/ca.key.pem -CAcreateserial -out zabbix.cert.pem -days 3650

Возвращаем обратно в /root/zabbix_ssl
