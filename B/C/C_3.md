# Туннели

## На роутере DC-RTR-1:

```bash
# Туннель до MSK-RTR
ip tunnel add gre1 mode gre local <IP-DC-RTR-1> remote <IP-MSK-RTR> ttl 255
ip addr add 10.7.7.1/30 dev gre1
ip link set gre1 up

# Туннель до YEKT-RTR
ip tunnel add gre2 mode gre local <IP-DC-RTR-1> remote <IP-YEKT-RTR> ttl 255
ip addr add 10.6.6.1/30 dev gre2
ip link set gre2 up
```

## На роутере DC-RTR-2:

```bash
# Туннель до MSK-RTR
ip tunnel add gre1 mode gre local <IP-DC-RTR-2> remote <IP-MSK-RTR> ttl 255
ip addr add 10.5.5.1/30 dev gre1
ip link set gre1 up

# Туннель до YEKT-RTR
ip tunnel add gre2 mode gre local <IP-DC-RTR-2> remote <IP-YEKT-RTR> ttl 255
ip addr add 10.8.8.1/30 dev gre2
ip link set gre2 up
```

## На роутере MSK-RTR:

```bash
# Туннель до DC-RTR-1
ip tunnel add gre1 mode gre local <IP-MSK-RTR> remote <IP-DC-RTR-1> ttl 255
ip addr add 10.7.7.2/30 dev gre1
ip link set gre1 up

# Туннель до DC-RTR-2
ip tunnel add gre2 mode gre local <IP-MSK-RTR> remote <IP-DC-RTR-2> ttl 255
ip addr add 10.5.5.2/30 dev gre2
ip link set gre2 up
```

## На роутере YEKT-RTR:

```bash
# Туннель до DC-RTR-1
ip tunnel add gre1 mode gre local <IP-YEKT-RTR> remote <IP-DC-RTR-1> ttl 255
ip addr add 10.6.6.2/30 dev gre1
ip link set gre1 up

# Туннель до DC-RTR-2
ip tunnel add gre2 mode gre local <IP-YEKT-RTR> remote <IP-DC-RTR-2> ttl 255
ip addr add 10.8.8.2/30 dev gre2
ip link set gre2 up
```

## Чтобы добавить скрипт в автозапуск:

```bash
chmod + x /path/to/script.sh
vim /etc/crontab
@reboot root /bin/bash /path/to/script.sh
```


